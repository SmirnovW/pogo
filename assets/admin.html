<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WR Publish</title>
    <link rel="stylesheet" href="/assets/styles.css">

</head>
<body>
	<div class="admin">
    <h1>White Rabbit Publish</h1>
	
	<form enctype="multipart/form-data" action="/admin/publish" method="post">
		<label for="title">Episode Title</label>
		<input type="text" id="title" name="title">
		<label for="description">Episode Description</label>
		<textarea name="description" id="description" cols="50" rows="10" style="resize: none;"></textarea>
		<label for="file">Media File</label>
		<input type="file" id="file" name="file">
		<label for="date">Publish Date</label>
		<input type="date" id="date" name="date">
		<input type="submit" value="Publish">
	</form>
	<hr />

	<form action="/admin/css" method="post" enctype="multipart/form-data">
		<label for="css">Custom CSS</label>
		<textarea name="css" id="css" cols="120" rows="20"></textarea><br />
		<input type="submit" value="Submit">
	</form>

<footer>
    <p>White Rabbit licensed under the GPLv3</p>
</footer>
</div>
<script>
if (window.location.hash == "#cssupdated") {
	window.alert("CSS Updated!");
}
if (window.location.hash == "#published") {
	window.alert("Episode Published!");
}
if (window.location.hash == "#failed") {
	window.alert("Something went wrong");
}

get("/admin/css", function(data) {
	document.getElementById("css").innerHTML=data;
});

function get(url, callback) {
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.onreadystatechange = function() { 
        if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
            callback(xmlHttp.responseText);
    }
    xmlHttp.open("GET", url, true);
    xmlHttp.send(null);
}
</script>
</body>
</html> 